<!-- Hero Section -->
<section class="hero bg-image text-white d-flex align-items-center justify-content-center">
    <div class="text-center">
        <h1 class="display-5 fw-bold">Local Tour Guides</h1>
        <p class="lead">Explore your destination with trusted locals.</p>
    </div>
</section>

<!-- Filter Section -->
<div class="container my-4">
    <div class="row g-3">
        <div class="col-md-4">
            <input type="text" class="form-control shadow-sm" [(ngModel)]="searchQuery"
                placeholder="Search by name or location">
        </div>
        <div class="col-md-3">
            <select class="form-select shadow-sm" [(ngModel)]="selectedLanguage">
                <option value="">All Languages</option>
                <option *ngFor="let lang of languages">{{ lang }}</option>
            </select>
        </div>
        <div class="col-md-3">
            <select class="form-select shadow-sm" [(ngModel)]="selectedSpecialty">
                <option value="">All Specialties</option>
                <option *ngFor="let sp of specialties">{{ sp }}</option>
            </select>
        </div>
        <div class="col-md-2">
            <button *ngIf="!isFilterApplied" class="w-100" (click)="filterGuides()"
                [disabled]="!searchQuery && !selectedLanguage && !selectedSpecialty">Search</button>
            <button *ngIf="isFilterApplied" class="w-100" (click)="fnClearFilter()">Clear</button>
        </div>
    </div>
</div>

<!-- Tour Guide Cards -->
<div class="container">
    <div class="row g-4">
        <div class="col-md-4" *ngFor="let guide of filteredGuides">
            <div class="card border-0 shadow guide-card h-100">
                <!-- Image and Rating -->
                <div class="position-relative">
                    <img [src]="guide.photo" class="card-img-top guide-img">
                    <span class="badge bg-warning rating-badge">
                        ★ {{ guide.rating }}
                    </span>
                </div>

                <!-- Card Body -->
                <div class="card-body d-flex flex-column">
                    <!-- Profile Header -->
                    <div>
                        <div class="d-flex align-items-center mb-3">
                            <img [src]="guide.photo" class="rounded-circle guide-avatar me-3">
                            <div>
                                <h5 class="card-title mb-0">{{ guide.name }}</h5>
                                <small class="text-muted">{{ guide.city }}</small>
                            </div>
                        </div>

                        <p class="mb-1 ibm"><strong>Experience:</strong> {{ guide.experience }} years</p>
                        <p class="mb-1 ibm"><strong>Languages:</strong>
                            <span *ngFor="let lang of guide.languages" class="badge bg-light text-dark me-1">{{ lang
                                }}</span>
                        </p>
                        <p class="mb-1 ibm"><strong>Specialties:</strong>
                            <span *ngFor="let s of guide.specialties" class="badge bg-theme me-1">{{ s }}</span>
                        </p>
                        <p class="mb-1 ibm"><strong>Price:</strong> ₹{{ guide.pricePerDay }} / day</p>
                        <p class="mb-1 ibm"><strong>Available:</strong> {{ guide.availability }}</p>
                        <p class="mb-2 ibm"><strong>Tags:</strong></p>
                        <div class="mb-2">
                            <span *ngFor="let tag of guide.tags"
                                class="badge bg-primary-subtle text-primary border border-primary rounded-pill me-1 mb-2">
                                {{ tag }}
                            </span>
                        </div>

                        <p class="text-muted small mt-2">{{ guide.bio }}</p>
                    </div>

                    <!-- Bottom Button Group -->
                    <div class="mt-auto pt-3">
                        <div class="d-flex gap-2">
                            <button target="_blank" class="btn-outline-theme w-50"
                                (click)="fnNumber(guide.contactNumber, 'contact')">
                                <i class="fa-solid fa-mobile-screen"></i> Contact
                            </button>
                            <button target="_blank" class="btn-outline-theme w-50"
                                (click)="fnNumber(guide.contactNumber, 'whatsapp')">
                                <i class="fa-brands fa-whatsapp"></i> Whatsapp
                            </button>
                        </div>
                        <button class="w-100 mt-3">View Profile</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- No Results Message -->
    <div *ngIf="filteredGuides.length === 0" class="text-center mt-5 text-muted fs-5">
        No guides found for selected filters.
    </div>
</div>